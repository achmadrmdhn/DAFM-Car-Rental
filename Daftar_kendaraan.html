<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="./dist/img/favicon-3.ico">
  <title>Daftar Kendaraan</title>
  <style>
    .deleteButton {
      background-color: red;
      color: white;
    }

    .detailButton {
      background-color: rgb(28, 240, 28);
      color: black;
    }

    .logo {
      width: 15%;
    }
  </style>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="./plugins/fontawesome-free/css/all.min.css" />
  <!-- Theme style -->
  <link rel="stylesheet" href="./dist/css/adminlte.min.css" />
  <!-- SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10" />
</head>

<body class="hold-transition sidebar-mini">
  <!-- Site wrapper -->
  <div class="wrapper">
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
      </ul>
      <br /><br />
      <img class="logo" src="./dist/img/Asset 1.png" alt="">
      <br /><br />

      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
        <!-- Navbar Search -->
        <li class="nav-item">
          <div class="navbar-search">
            <form class="form-inline">
              <div class="input-group input-group-sm">
                <input class="form-control form-control-navbar" type="search" placeholder="Search"
                  aria-label="Search" />
                <div class="input-group-append">
                  <button class="btn btn-navbar" type="submit">
                    <i class="fas fa-search"></i>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </li>
      </ul>
    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
      <!-- Brand Logo -->
      <a href="#" class="brand-link">
        <img src="./dist/img/Asset 4.png" alt="logo" class="brand-image img-circle elevation-3">
        <h4><span class="brand-text font-weight-light">DAFM RentCar</span></h4>
      </a>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Sidebar user (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
          <div class="image">
            <img src="./dist/img/user-3d-2.png" class="img-circle elevation-2" alt="User Image">
          </div>
          <div class="info">
            <h5><a href="#" class="d-block">User</a></h5>
          </div>
        </div>

        <!-- SidebarSearch Form -->
        <div class="form-inline">
          <div class="input-group" data-widget="sidebar-search">
            <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
              <button class="btn btn-sidebar">
                <i class="fas fa-search fa-fw"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Sidebar Menu -->
        <nav class="mt-2">
          <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
            <li class="nav-item menu-open">
              <a href="#" class="nav-link active">
                <i class="nav-icon fas fa-table"></i>
                <p>
                  Daftar
                  <i class="fas fa-angle-left right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                <li class="nav-item">
                  <a href="./Kelola_kendaraan.html" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Kelola Kendaraan</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="./Daftar_kendaraan.html" class="nav-link active">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Daftar Kendaraan</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="./Daftar_peminjaman.html" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Daftar Peminjaman</p>
                  </a>
                </li>
            </li>
          </ul>

          <li class="nav-item">
            <a href="#" class="nav-link">
              <ion-icon name="log-out-outline" class="nav-icon"></ion-icon>
              <p>
                <button id="logout" class="btn btn-danger">Log Out</button>
              </p>
            </a>
          </li>
        </nav>
      </div>
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <section class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h4>Daftar Kendaraan</h4>
            </div>
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                </li>
                <li class="breadcrumb-item active">Daftar Kendaraan</li>
              </ol>
            </div>
          </div>
        </div>
        <!-- /.container-fluid -->
      </section>

      <!-- Main content -->
      <section class="content">
        <!-- card header -->
        <div class="card">
          <div class="card-header">
            <button class="tambahButton" type="submit" style="background-color:  rgb(255, 99, 15); color:white">
              <i class="bi bi-plus-square"></i>
              Tambah
            </button>
          </div>
          <div class="card-body">
            <table class="table table-bordered table-striped" id="table">
              <thead>
                <tr>
                  <th style="width: 1%">No</th>
                  <th>Nama Kendaraan</th>
                  <th>Kategori</th>
                  <th>Fasilitas</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Toyota Innova</td>
                  <td>Mobil Keluarga</td>
                  <td>Seat 6, Bagasi Belakang</td>
                  <td class="project-actions">
                    <button class="detailButton" id="detail">
                      <i class="fas fa-folder"></i>
                      <a href="#" style="color:black">Detail</a>
                    </button>

                    <button class="editButton" id="edit">
                      <i class="fas fa-pencil-alt"></i>
                      Edit
                    </button>

                    <button id="delete" class="deleteButton">
                      <i class="fas fa-trash"></i>
                      Delete
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Toyota Alphard</td>
                  <td>Mobil Keluarga</td>
                  <td>Seat 7, Bagasi Belakang</td>
                  <td class="project-actions">
                    <button class="detailButton" id="detail">
                      <i class="fas fa-folder"></i>
                      <a href="#" style="color:black">Detail</a>
                    </button>

                    <button class="editButton" id="edit">
                      <i class="fas fa-pencil-alt"></i>
                      Edit
                    </button>

                    <button id="delete" class="deleteButton">
                      <i class="fas fa-trash"></i>
                      Delete
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Modal untuk tambah -->
    <div class="modal fade" id="tambahModal" tabindex="-1" aria-labelledby="tambahModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tambahModalLabel">Tambah Kendaraan</h5>
          </div>
          <div class="modal-body">
            <form id="tambahForm">
              <div class="mb-3">
                <label for="tambahName" class="form-label">Nama Kendaraan</label>
                <input type="text" class="form-control" id="tambahName" required />
              </div>
              <div class="mb-3">
                <label for="tambahType" class="form-label">Kategori</label>
                <input type="text" class="form-control" id="tambahType" required />
              </div>
              <div class="mb-3">
                <label for="tambahExperience" class="form-label">Fasilitas</label>
                <input type="text" class="form-control" id="tambahExperience" required />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="tambahButton">
              Tambah
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal untuk edit -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editModalLabel">Edit Kendaraan</h5>
          </div>
          <div class="modal-body">
            <form id="editForm">
              <div class="mb-3">
                <label for="name" class="form-label">Nama Kendaraan</label>
                <input type="text" class="form-control" id="name" />
              </div>
              <div class="mb-3">
                <label for="type" class="form-label">Kategori</label>
                <input type="text" class="form-control" id="type" />
              </div>
              <div class="mb-3">
                <label for="experience" class="form-label">Fasilitas</label>
                <input type="text" class="form-control" id="experience" />
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="saveButton">
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="main-footer">
      <div class="float-right d-none d-sm-block">
        <b>Go Beyond with DAFM</b>
      </div>
      <strong>Develop by <a href="">DAFM </a></strong>@2023
    </footer>
    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
      <!-- Control sidebar content goes here -->
    </aside>
    <!-- /.control-sidebar -->
    <!-- ./wrapper -->
  </div>
  <!--icon-->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <!-- jQuery -->
  <script src="./plugins/jquery/jquery.min.js"></script>
  <!-- bootstrap-->
  <!-- Bootstrap 4 -->
  <script src="./plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
  <script src="./dist/js/adminlte.min.js"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="./dist/js/demo.js"></script>
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <!-- Code injected by live-server -->
  <script>
    // <![CDATA[  <-- For SVG support
    if ("WebSocket" in window) {
      (function () {
        function refreshCSS() {
          var sheets = [].slice.call(document.getElementsByTagName("link"));
          var head = document.getElementsByTagName("head")[0];
          for (var i = 0; i < sheets.length; ++i) {
            var elem = sheets[i];
            var parent = elem.parentElement || head;
            parent.removeChild(elem);
            var rel = elem.rel;
            if (
              (elem.href && typeof rel != "string") ||
              rel.length == 0 ||
              rel.toLowerCase() == "stylesheet"
            ) {
              var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
              elem.href =
                url +
                (url.indexOf("?") >= 0 ? "&" : "?") +
                "_cacheOverride=" +
                new Date().valueOf();
            }
            parent.appendChild(elem);
          }
        }
        var protocol =
          window.location.protocol === "http:" ? "ws://" : "wss://";
        var address =
          protocol + window.location.host + window.location.pathname + "/ws";
        var socket = new WebSocket(address);
        socket.onmessage = function (msg) {
          if (msg.data == "reload") window.location.reload();
          else if (msg.data == "refreshcss") refreshCSS();
        };
        if (
          sessionStorage &&
          !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")
        ) {
          console.log("Live reload enabled.");
          sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
        }
      })();
    } else {
      console.error(
        "Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading."
      );
    }
    // ]]>
  </script>

  <!-- Modal untuk tambah -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Menangani tombol "Tambah" untuk menampilkan modal
      document
        .querySelector(".tambahButton")
        .addEventListener("click", function () {
          $("#tambahModal").modal("show");
        });

      // Menangani tombol "Tambah" pada modal
      document
        .getElementById("tambahButton")
        .addEventListener("click", function () {
          var newName = document.getElementById("tambahName").value;
          var newType = document.getElementById("tambahType").value;
          var newExperience =
            document.getElementById("tambahExperience").value;

          if (
            newName.trim() !== "" &&
            newType.trim() !== "" &&
            newExperience.trim() !== ""
          ) {
            var table = document.getElementById("table");
            var row = table.insertRow(table.rows.length);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);

            cell1.innerHTML = table.rows.length - 1;
            cell2.innerHTML = "<a>" + newName + "</a>";
            cell3.innerHTML = newType;
            cell4.innerHTML = newExperience;
            cell5.innerHTML =
              ' <button class="detailButton" id="detail"><i class="fas fa-folder"></i><a href="admin.html" style="color: black"> Detail</a></button> ' +
              ' <button class="editButton" id="edit"><i class="fas fa-pencil-alt"></i> Edit</button> ' +
              ' <button class="deleteButton" id="delete"><i class="fas fa-trash"></i> Delete</button> ';
          }
        });
    });

    // modal untuk edit
    document.addEventListener("DOMContentLoaded", function () {
      var editButtons = document.getElementsByClassName("editButton");
      var saveButton = document.getElementById("saveButton");
      var nameCell, typeCell, experienceCell;
      var modal;

      for (var i = 0; i < editButtons.length; i++) {
        editButtons[i].addEventListener("click", function () {
          var row = this.parentNode.parentNode;
          nameCell = row.cells[1];
          typeCell = row.cells[2];
          experienceCell = row.cells[3];
          var name = nameCell.innerText;
          var type = typeCell.innerText;
          var experience = experienceCell.innerText;

          // Menampilkan modal
          modal = new bootstrap.Modal(document.getElementById("editModal"));
          modal.show();

          // Mengisi bidang input dengan data saat ini
          document.getElementById("name").value = name;
          document.getElementById("type").value = type;
          document.getElementById("experience").value = experience;
        });
      }

      // Menyimpan perubahan saat tombol Save diklik
      saveButton.addEventListener("click", function () {
        var newName = document.getElementById("name").value;
        var newType = document.getElementById("type").value;
        var newExperience = document.getElementById("experience").value;
        if (newName && nameCell) {
          nameCell.innerText = newName;
        }
        if (newType && typeCell) {
          typeCell.innerText = newType;
        }
        if (newExperience && experienceCell) {
          experienceCell.innerText = newExperience;
        }
        modal.hide();
      });

      let deleteButtons = document.getElementsByClassName("deleteButton");
      for (let i = 0; i < deleteButtons.length; i++) {
        deleteButtons[i].addEventListener("click", function () {
          let row = this.parentNode.parentNode;
          row.parentNode.removeChild(row);
        });
      }
    });

    document
      .getElementById("tambahButton")
      .addEventListener("click", function () {
        var newName = document.getElementById("tambahName").value;
        var newType = document.getElementById("tambahType").value;
        var newExperience = document.getElementById("tambahExperience").value;

        if (
          newName.trim() !== "" &&
          newType.trim() !== "" &&
          newExperience.trim() !== ""
        ) {
          var table = document.getElementById("table");
          var row = table.insertRow(table.rows.length);
          var cell1 = row.insertCell(0);
          var cell2 = row.insertCell(1);
          var cell3 = row.insertCell(2);
          var cell4 = row.insertCell(3);
          var cell5 = row.insertCell(4);

          cell1.innerHTML = table.rows.length - 1;
          cell2.innerHTML = "<a>" + newName + "</a>";
          cell3.innerHTML = newType;
          cell4.innerHTML = newExperience;
          cell5.innerHTML =
            ' <button class="detailButton" id="detail"><i class="fas fa-folder"></i><a href="admin.html" style="color: black"> Detail</a></button> ' +
            ' <button class="editButton" id="edit"><i class="fas fa-pencil-alt"></i> Edit</button> ' +
            ' <button class="deleteButton" id="delete"><i class="fas fa-trash"></i> Delete</button> ';
        } else {
          alert("Semua kolom input harus diisi.");
        }

        // Menutup modal setelah menambahkan data
        $("#tambahModal").modal("hide");
        document.getElementById("tambahForm").reset();
      });
  </script>

  <!-- log out -->
  <script>
    document.getElementById('logout').addEventListener('click', function () {
      swal.fire({
        title: 'Anda Yakin Ingin Keluar?',
        text: '',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Ya. Keluar!'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = './login.html';
        }
      });
    });
  </script>
</body>
</html>